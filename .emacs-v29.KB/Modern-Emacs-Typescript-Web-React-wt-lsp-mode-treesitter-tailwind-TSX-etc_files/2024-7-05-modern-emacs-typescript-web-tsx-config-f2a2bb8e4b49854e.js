(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42],{8942:function(n,s,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/2024-7-05-modern-emacs-typescript-web-tsx-config",function(){return e(9216)}])},3638:function(n,s,e){"use strict";e.d(s,{B:function(){return m}});var a=e(5893),t=e(9008),c=e.n(t),l=e(1163),o=e(7527),i=e(6010);function r(n){let{children:s,className:e}=n;return(0,a.jsx)("div",{className:(0,i.Z)(e,"md:prose-lg xl:prose-xl prose  dark:prose-invert"),children:s})}var p=e(3997);function d(n){return(0,a.jsx)("svg",{viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",...n,children:(0,a.jsx)("path",{d:"M7.25 11.25 3.75 8m0 0 3.5-3.25M3.75 8h8.5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function m(n){let{children:s,meta:e,isRssFeed:t=!1,previousPathname:i}=n,m=(0,l.useRouter)();return t?s:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{children:`${e.title} - Ovi Stoica`}),(0,a.jsx)("meta",{name:"description",content:e.description})]}),(0,a.jsx)(o.W,{className:"mt-16 lg:mt-32",children:(0,a.jsx)("div",{className:"xl:relative",children:(0,a.jsxs)("div",{className:"mx-auto max-w-2xl",children:[i&&(0,a.jsx)("button",{type:"button",onClick:()=>m.back(),"aria-label":"Go back to articles",className:"group mb-8 flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0 dark:ring-white/10 dark:hover:border-zinc-700 dark:hover:ring-white/20 lg:absolute lg:-left-5 lg:mb-0 lg:-mt-2 xl:-top-1.5 xl:left-0 xl:mt-0",children:(0,a.jsx)(d,{className:"h-4 w-4 stroke-zinc-500 transition group-hover:stroke-zinc-700 dark:stroke-zinc-500 dark:group-hover:stroke-zinc-400"})}),(0,a.jsxs)("article",{children:[(0,a.jsxs)("header",{className:"flex flex-col",children:[(0,a.jsx)("h1",{className:"mt-6 text-4xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100 sm:text-5xl",children:e.title}),(0,a.jsxs)("time",{dateTime:e.date,className:"order-first flex items-center text-base text-zinc-400 dark:text-zinc-500",children:[(0,a.jsx)("span",{className:"h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"}),(0,a.jsx)("span",{className:"ml-3",children:(0,p.p)(e.date)})]})]}),(0,a.jsx)(r,{className:"mt-8",children:s})]})]})})})]})}},3997:function(n,s,e){"use strict";function a(n){return new Date(`${n}T00:00:00Z`).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"})}e.d(s,{p:function(){return a}})},9216:function(n,s,e){"use strict";e.r(s),e.d(s,{meta:function(){return l}});var a=e(5893),t=e(1151),c=e(3638);let l={author:"Ovi Stoica",title:"Modern Emacs Typescript Web (React) Config with lsp-mode, treesitter, tailwind, TSX & more",date:"2024-07-05",tags:["emacs","web-development","react","tailwindcss"],description:"Modern web development config for emacs"},o=n=>(0,a.jsx)(c.B,Object.assign({meta:l},n));function i(n){let s=Object.assign({h1:"h1",ol:"ol",li:"li",a:"a",h2:"h2",p:"p",ul:"ul",code:"code",pre:"pre",span:"span",strong:"strong",h3:"h3",em:"em"},(0,t.ah)(),n.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h1,{children:"Table of Contents"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#orgb6fd011",children:"Introduction"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#orgf6d33f7",children:"Part 1: Treesitter for Typescript & TSX"})}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.a,{href:"#orgc542f94",children:"LSP Support"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#org95be3b8",children:"Completion setup"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#org014ff07",children:"Linter setup"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#org0c47228",children:"LSP Setup"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#org2b45109",children:"Eslint"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#org843e1fd",children:"(Optional) Tailwind LSP Server"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.a,{href:"#org620d7ea",children:"LSP Performance"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#orgc88562e",children:"Emacs LSP Booster"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#orgd4dc6d9",children:"Structural editing"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#orgcc099c1",children:"Formatting buffers with Prettier"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#other-resources",children:"Other resources"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"#conclusion",children:"Conclusion"})}),"\n"]}),"\n",(0,a.jsx)("a",{id:"orgb6fd011"}),"\n",(0,a.jsx)(s.h2,{children:"Introduction"}),"\n",(0,a.jsxs)(s.p,{children:["I've worked within the JS ecosystem for the past 8 years using editors like ",(0,a.jsx)(s.a,{href:"https://www.jetbrains.com/webstorm/",children:"Webstorm"})," and ",(0,a.jsx)(s.a,{href:"https://code.visualstudio.com/",children:"VSCode"}),", I started using Emacs around 6 months ago and I quickly found that\nsome of the pre-made configurations like Doom, don't come setup to\nfully support modern web development like the other ones, so I started a journey to make my own configuration that would satisfy all the needs of modern web dev."]}),"\n",(0,a.jsx)(s.p,{children:"Here are some requirements:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Multiple LSP server support (",(0,a.jsx)(s.code,{children:"typescript"}),", ",(0,a.jsx)(s.code,{children:"eslint"}),", ",(0,a.jsx)(s.code,{children:"tailwind"})," -\noptional) that work well together"]}),"\n",(0,a.jsxs)(s.li,{children:["JSX/TSX support with full features in an efficient way (",(0,a.jsx)(s.a,{href:"https://tree-sitter.github.io/tree-sitter/",children:"treesitter"}),")"]}),"\n",(0,a.jsxs)(s.li,{children:["JSX structural editing (",(0,a.jsx)(s.a,{href:"https://github.com/mickeynp/combobulate",children:"combobulate"}),")"]}),"\n",(0,a.jsxs)(s.li,{children:["Prettier auto-formatting (",(0,a.jsx)(s.a,{href:"https://github.com/radian-software/apheleia",children:"apheleia"}),")"]}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"We will setup all of these parts so the end result looks like this:"}),"\n",(0,a.jsx)("img",{src:"/static/gifs/emacs-tsx-demo.gif"}),"\n",(0,a.jsx)("a",{id:"orgf6d33f7"}),"\n",(0,a.jsx)(s.h2,{children:"Part 1: Treesitter for Typescript & TSX"}),"\n",(0,a.jsxs)(s.p,{children:["People in the Emacs community have been combining libraries like ",(0,a.jsx)(s.a,{href:"https://web-mode.org/",children:"Web\nMode"})," and ",(0,a.jsx)(s.a,{href:"https://github.com/ananthakumaran/tide",children:"Tide"})," to achieve good TSX support but this setup doesn't\npair nice with LSP servers."]}),"\n",(0,a.jsxs)(s.p,{children:["You can setup ",(0,a.jsx)(s.a,{href:"https://eslint.org/",children:"eslint"})," through ",(0,a.jsx)(s.a,{href:"https://www.flycheck.org/en/latest/",children:"flycheck"})," or ",(0,a.jsx)(s.a,{href:"https://elpa.gnu.org/packages/flymake.html",children:"flymake"})," but this removes the\npossibility to execute code actions:"]}),"\n",(0,a.jsx)("img",{src:"/static/gifs/eslint-code-actions-demo.gif"}),"\n",(0,a.jsxs)(s.p,{children:["Nowadays we can add full TSX support with Treesitter for the best performance in parsing the file and support for structural editing directly on the syntax tree (think ",(0,a.jsx)(s.code,{children:"delete-entire-jsx-node"}),", ",(0,a.jsx)(s.code,{children:"wrap-jsx-node"})," etc.)"]}),"\n",(0,a.jsx)(s.pre,{className:"language-elisp",children:(0,a.jsxs)(s.code,{className:"language-elisp",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"use-package"})," treesit\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"\\\\.tsx\\\\\'"'})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," tsx-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n             ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"\\\\.js\\\\\'"'}),"  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," typescript-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n             ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"\\\\.mjs\\\\\'"'})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," typescript-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n             ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"\\\\.mts\\\\\'"'})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," typescript-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n             ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"\\\\.cjs\\\\\'"'})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," typescript-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n             ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"\\\\.ts\\\\\'"'}),"  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," typescript-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n             ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"\\\\.jsx\\\\\'"'})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," tsx-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n             ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"\\\\.json\\\\\'"'})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"  json-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n             ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"\\\\.Dockerfile\\\\\'"'})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," dockerfile-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n             ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"\\\\.prisma\\\\\'"'})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," prisma-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n             ",(0,a.jsx)(s.span,{className:"token comment",children:";; More modes defined here..."}),"\n             ",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":preface"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token defun",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"defun"})," ",(0,a.jsx)(s.span,{className:"token function",children:"os/setup-install-grammars"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token arguments"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})]}),"\n        ",(0,a.jsx)(s.span,{className:"token string",children:'"Install Tree-sitter grammars if they are absent."'}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token interactive keyword",children:"interactive"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"dolist"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"grammar"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"'("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"css"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/tree-sitter/tree-sitter-css"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"v0.20.0"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"bash"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/tree-sitter/tree-sitter-bash"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"html"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/tree-sitter/tree-sitter-html"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"v0.20.1"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"javascript"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/tree-sitter/tree-sitter-javascript"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"v0.21.2"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"src"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"json"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/tree-sitter/tree-sitter-json"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"v0.20.2"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"python"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/tree-sitter/tree-sitter-python"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"v0.20.4"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"go"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/tree-sitter/tree-sitter-go"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"v0.20.0"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"markdown"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/ikatyang/tree-sitter-markdown"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"make"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/alemuller/tree-sitter-make"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"elisp"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/Wilfred/tree-sitter-elisp"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"cmake"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/uyha/tree-sitter-cmake"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"c"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/tree-sitter/tree-sitter-c"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"cpp"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/tree-sitter/tree-sitter-cpp"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"toml"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/tree-sitter/tree-sitter-toml"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"tsx"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/tree-sitter/tree-sitter-typescript"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"v0.20.3"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"tsx/src"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"typescript"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/tree-sitter/tree-sitter-typescript"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"v0.20.3"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"typescript/src"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"yaml"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/ikatyang/tree-sitter-yaml"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"v0.5.0"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"prisma"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"https://github.com/victorhqc/tree-sitter-prisma"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n          ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"add-to-list"})," ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'treesit-language-source-alist"})," grammar",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n          ",(0,a.jsx)(s.span,{className:"token comment",children:";; Only install `grammar' if we don't already have it"}),"\n          ",(0,a.jsx)(s.span,{className:"token comment",children:";; installed. However, if you want to *update* a grammar then"}),"\n          ",(0,a.jsx)(s.span,{className:"token comment",children:";; this obviously prevents that from happening."}),"\n          ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"unless"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"treesit-language-available-p"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"car"})," grammar",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n            ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"treesit-install-language-grammar"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"car"})," grammar",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; Optional, but recommended. Tree-sitter enabled major modes are"}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; distinct from their ordinary counterparts."}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";;"}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; You can remap major modes with `major-mode-remap-alist'. Note"}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; that this does *not* extend to hooks! Make sure you migrate them"}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; also"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"dolist"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"mapping"}),"\n               ",(0,a.jsx)(s.span,{className:"token punctuation",children:"'("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"python-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," python-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"css-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," css-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"typescript-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," typescript-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"js-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," typescript-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"js2-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," typescript-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"c-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," c-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"c++-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," c++-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"c-or-c++-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," c-or-c++-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"bash-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," bash-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"css-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," css-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"json-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," json-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"js-json-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," json-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"sh-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," bash-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                 ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"sh-base-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," bash-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"add-to-list"})," ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'major-mode-remap-alist"})," mapping",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":config"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"os/setup-install-grammars"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsxs)(s.p,{children:["Full credit for this clean ",(0,a.jsx)(s.code,{children:"treesitter"})," setup goes to ",(0,a.jsx)(s.a,{href:"https://github.com/mickeynp",children:"Mickey Petersen"})," in the\n",(0,a.jsx)(s.a,{href:"https://github.com/mickeynp/combobulate?tab=readme-ov-file#complete-example-with-tree-sitter-grammar-installation",children:"Combobulate Treesitter section"})]}),"\n",(0,a.jsx)("a",{id:"orgc542f94"}),"\n",(0,a.jsx)(s.h2,{children:"LSP Support"}),"\n",(0,a.jsxs)(s.p,{children:["We'll need LSP support for features like ",(0,a.jsx)(s.code,{children:"completion"}),",",(0,a.jsx)(s.code,{children:"go-to-definition,"}),"\nrenaming variable in the entire project and so on. Web development is particularly different then other environments because you need more than one LSP provider."]}),"\n",(0,a.jsx)(s.p,{children:"If you look at VSCode, in a project with Tailwind support, there are 3 LSP servers active at the same time, providing actions for users."}),"\n",(0,a.jsxs)(s.p,{children:["If you want a comprehensive comparison between the current LSP options for emacs, ",(0,a.jsx)(s.a,{href:"https://www.reddit.com/r/emacs/comments/1c0v28k/lspmode_vs_lspbridge_vs_lspce_vs_eglot/",children:"here is the best comparison I found"}),"."]}),"\n",(0,a.jsxs)(s.p,{children:["I've tried ",(0,a.jsx)(s.code,{children:"eglot"}),", ",(0,a.jsx)(s.code,{children:"lsp-bridge"})," & ",(0,a.jsx)(s.code,{children:"lsp-mode"}),":"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.a,{href:"https://github.com/joaotavora/eglot",children:"eglot"})," is a nice since it's the emacs default but it doesn't support multiple servers in the same buffer which makes it a non-candidate."]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.a,{href:"https://github.com/manateelazycat/lsp-bridge",children:"lsp-bridge"})," is the ",(0,a.jsx)(s.strong,{children:"fastest"})," provider but all tools used are custom made (custom completion, custom reference explorer) which makes it hard to integrate into your normal workflow. Setting it up is also harder than the rest"]}),"\n"]}),"\n",(0,a.jsxs)(s.li,{children:["\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.a,{href:"https://emacs-lsp.github.io/lsp-mode/",children:"lsp-mode"})," satisfies all the criteria and all the bells & whistles that it comes with can be muted so this is the provider I chose. We will\ndelve in the performance tweaks after the initial setup."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)("a",{id:"org95be3b8"}),"\n",(0,a.jsx)(s.h3,{children:"Completion setup"}),"\n",(0,a.jsxs)(s.p,{children:["First we need to setup a completion provider. For this I use ",(0,a.jsx)(s.a,{href:"https://github.com/minad/corfu",children:"Corfu"}),":"]}),"\n",(0,a.jsx)(s.pre,{className:"language-elisp",children:(0,a.jsxs)(s.code,{className:"language-elisp",children:["    ",(0,a.jsx)(s.span,{className:"token heading comment title",children:";;;; Code Completion"}),"\n    ",(0,a.jsx)(s.span,{className:"token heading comment title",children:";;;; Code Completion"}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"use-package"})," corfu\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":ensure"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; Optional customizations"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":custom"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"corfu-cycle"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"                 ",(0,a.jsx)(s.span,{className:"token comment",children:"; Allows cycling through candidates"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"corfu-auto"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"                  ",(0,a.jsx)(s.span,{className:"token comment",children:"; Enable auto completion"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"corfu-auto-prefix"})," ",(0,a.jsx)(s.span,{className:"token number",children:"2"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"           ",(0,a.jsx)(s.span,{className:"token comment",children:"; Minimum length of prefix for completion"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"corfu-auto-delay"})," ",(0,a.jsx)(s.span,{className:"token number",children:"0"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"            ",(0,a.jsx)(s.span,{className:"token comment",children:"; No delay for completion"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"corfu-popupinfo-delay"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"'("}),(0,a.jsx)(s.span,{className:"token number",children:"0.5"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," ",(0,a.jsx)(s.span,{className:"token number",children:"0.2"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"  ",(0,a.jsx)(s.span,{className:"token comment",children:"; Automatically update info popup after that numver of seconds"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"corfu-preview-current"})," ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'insert"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token comment",children:"; insert previewed candidate"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"corfu-preselect"})," ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'prompt"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"corfu-on-exact-match"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"      ",(0,a.jsx)(s.span,{className:"token comment",children:"; Don't auto expand tempel snippets"}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; Optionally use TAB for cycling, default is `corfu-complete'."}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":bind"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token lisp-property property",children:":map"})," corfu-map\n                  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"M-SPC"'}),"      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," corfu-insert-separator",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"TAB"'}),"        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," corfu-next",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"["}),"tab",(0,a.jsx)(s.span,{className:"token punctuation",children:"]"}),"        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," corfu-next",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"S-TAB"'}),"      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," corfu-previous",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"["}),"backtab",(0,a.jsx)(s.span,{className:"token punctuation",children:"]"}),"    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," corfu-previous",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"S-<return>"'})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," corfu-insert",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"RET"'}),"        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," corfu-insert",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":init"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"global-corfu-mode"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"corfu-history-mode"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"corfu-popupinfo-mode"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token comment",children:"; Popup completion info"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":config"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"add-hook"})," ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'eshell-mode-hook"}),"\n                ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token lambda",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"lambda"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token arguments"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})]})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"setq-local"})," corfu-quit-at-boundary ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),"\n                                       corfu-quit-no-match ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),"\n                                       corfu-auto ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"corfu-mode"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),"\n                ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsx)("a",{id:"org014ff07"}),"\n",(0,a.jsx)(s.h3,{children:"Linter setup"}),"\n",(0,a.jsx)(s.p,{children:"Optionally you can setup a linter through which lsp-mode will give you\ndiagnostics for your project & buffer."}),"\n",(0,a.jsx)(s.pre,{className:"language-elisp",children:(0,a.jsxs)(s.code,{className:"language-elisp",children:["    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"use-package"})," flycheck\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":ensure"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":init"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"global-flycheck-mode"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":bind"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token lisp-property property",children:":map"})," flycheck-mode-map\n                  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"M-n"'})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," flycheck-next-error",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token comment",children:"; optional but recommended error navigation"}),"\n                  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"M-p"'})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," flycheck-previous-error",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsx)("a",{id:"org0c47228"}),"\n",(0,a.jsx)(s.h3,{children:"LSP Setup"}),"\n",(0,a.jsx)(s.pre,{className:"language-elisp",children:(0,a.jsxs)(s.code,{className:"language-elisp",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"use-package"})," lsp-mode\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":diminish"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"LSP"'}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":ensure"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":hook"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," lsp-diagnostics-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n             ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," lsp-enable-which-key-integration",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n             ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"tsx-ts-mode"}),"\n               typescript-ts-mode\n               js-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," lsp-deferred",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":custom"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-keymap-prefix"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"C-c l"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"           ",(0,a.jsx)(s.span,{className:"token comment",children:"; Prefix for LSP actions"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-completion-provider"})," ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":none"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"       ",(0,a.jsx)(s.span,{className:"token comment",children:"; Using Corfu as the provider"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-diagnostics-provider"})," ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":flycheck"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-session-file"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"locate-user-emacs-file"})," ",(0,a.jsx)(s.span,{className:"token string",children:'".lsp-session"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-log-io"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"                      ",(0,a.jsx)(s.span,{className:"token comment",children:"; IMPORTANT! Use only for debugging! Drastically affects performance"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-keep-workspace-alive"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"        ",(0,a.jsx)(s.span,{className:"token comment",children:"; Close LSP server if all project buffers are closed"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-idle-delay"})," ",(0,a.jsx)(s.span,{className:"token number",children:"0.5"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"                  ",(0,a.jsx)(s.span,{className:"token comment",children:"; Debounce timer for `after-change-function'"}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; core"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-enable-xref"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"                   ",(0,a.jsx)(s.span,{className:"token comment",children:"; Use xref to find references"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-auto-configure"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"                ",(0,a.jsx)(s.span,{className:"token comment",children:"; Used to decide between current active servers"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-eldoc-enable-hover"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"            ",(0,a.jsx)(s.span,{className:"token comment",children:"; Display signature information in the echo area"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-enable-dap-auto-configure"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"     ",(0,a.jsx)(s.span,{className:"token comment",children:"; Debug support"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-enable-file-watchers"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-enable-folding"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"              ",(0,a.jsx)(s.span,{className:"token comment",children:"; I disable folding since I use origami"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-enable-imenu"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-enable-indentation"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"          ",(0,a.jsx)(s.span,{className:"token comment",children:"; I use prettier"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-enable-links"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"                ",(0,a.jsx)(s.span,{className:"token comment",children:"; No need since we have `browse-url'"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-enable-on-type-formatting"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"   ",(0,a.jsx)(s.span,{className:"token comment",children:"; Prettier handles this"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-enable-suggest-server-download"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token comment",children:"; Useful prompt to download LSP providers"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-enable-symbol-highlighting"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"     ",(0,a.jsx)(s.span,{className:"token comment",children:"; Shows usages of symbol at point in the current buffer"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-enable-text-document-color"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"   ",(0,a.jsx)(s.span,{className:"token comment",children:"; This is Treesitter's job"}),"\n\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-ui-sideline-show-hover"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"      ",(0,a.jsx)(s.span,{className:"token comment",children:"; Sideline used only for diagnostics"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-ui-sideline-diagnostic-max-lines"})," ",(0,a.jsx)(s.span,{className:"token number",children:"20"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token comment",children:"; 20 lines since typescript errors can be quite big"}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; completion"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-completion-enable"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-completion-enable-additional-text-edit"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token comment",children:"; Ex: auto-insert an import for a completion candidate"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-enable-snippet"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"                         ",(0,a.jsx)(s.span,{className:"token comment",children:"; Important to provide full JSX completion"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-completion-show-kind"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"                   ",(0,a.jsx)(s.span,{className:"token comment",children:"; Optional"}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; headerline"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-headerline-breadcrumb-enable"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"  ",(0,a.jsx)(s.span,{className:"token comment",children:"; Optional, I like the breadcrumbs"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-headerline-breadcrumb-enable-diagnostics"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token comment",children:"; Don't make them red, too noisy"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-headerline-breadcrumb-enable-symbol-numbers"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-headerline-breadcrumb-icons-enable"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; modeline"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-modeline-code-actions-enable"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token comment",children:"; Modeline should be relatively clean"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-modeline-diagnostics-enable"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"  ",(0,a.jsx)(s.span,{className:"token comment",children:"; Already supported through `flycheck'"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-modeline-workspace-status-enable"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token comment",children:'; Modeline displays "LSP" when lsp-mode is enabled'}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-signature-doc-lines"})," ",(0,a.jsx)(s.span,{className:"token number",children:"1"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"                ",(0,a.jsx)(s.span,{className:"token comment",children:"; Don't raise the echo area. It's distracting"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-ui-doc-use-childframe"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"              ",(0,a.jsx)(s.span,{className:"token comment",children:"; Show docs for symbol at point"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-eldoc-render-all"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"            ",(0,a.jsx)(s.span,{className:"token comment",children:"; This would be very useful if it would respect `lsp-signature-doc-lines', currently it's distracting"}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; lens"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-lens-enable"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"                 ",(0,a.jsx)(s.span,{className:"token comment",children:"; Optional, I don't need it"}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; semantic"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-semantic-tokens-enable"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"      ",(0,a.jsx)(s.span,{className:"token comment",children:"; Related to highlighting, and we defer to treesitter"}),"\n\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":init"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"setq"})," lsp-use-plists ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"use-package"})," lsp-completion\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":no-require"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":hook"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," lsp-completion-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"use-package"})," lsp-ui\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":ensure"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":commands"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-ui-doc-show"}),"\n       lsp-ui-doc-glance",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":bind"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token lisp-property property",children:":map"})," lsp-mode-map\n                  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"C-c C-d"'})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'lsp-ui-doc-glance"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":after"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-mode"})," evil",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":config"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"setq"})," lsp-ui-doc-enable ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),"\n                    evil-lookup-func ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"#'lsp-ui-doc-glance"})," ",(0,a.jsx)(s.span,{className:"token comment",children:"; Makes K in evil-mode toggle the doc for symbol at point"}),"\n                    lsp-ui-doc-show-with-cursor ",(0,a.jsx)(s.span,{className:"token boolean",children:"nil"}),"      ",(0,a.jsx)(s.span,{className:"token comment",children:"; Don't show doc when cursor is over symbol - too distracting"}),"\n                    lsp-ui-doc-include-signature ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),"       ",(0,a.jsx)(s.span,{className:"token comment",children:"; Show signature"}),"\n                    lsp-ui-doc-position ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'at-point"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n\n\n"]})}),"\n",(0,a.jsxs)(s.p,{children:["It's quite big but most of it disables things I don't need. I took 90%\nof this config from Andrey Listopadov's ",(0,a.jsx)(s.a,{href:"https://andreyor.st/posts/2023-09-09-migrating-from-lsp-mode-to-eglot/",children:"Migrating from LSP-Mode to\nEglot"})," article where ironically in the end he moves back to lsp-mode."]}),"\n",(0,a.jsxs)(s.p,{children:["Now we have a minimal LSP configuration. If you visit a ",(0,a.jsx)(s.code,{children:".ts"})," or\n",(0,a.jsx)(s.code,{children:".tsx"})," file, you will be prompted to enable LSP and most likely\ndownload a server. Select ",(0,a.jsx)(s.code,{children:"ts-ls"})]}),"\n",(0,a.jsx)("a",{id:"org2b45109"}),"\n",(0,a.jsx)(s.h3,{children:"Eslint"}),"\n",(0,a.jsxs)(s.p,{children:["Let's setup ",(0,a.jsx)(s.code,{children:"eslint"})," to start in projects that support it"]}),"\n",(0,a.jsx)(s.pre,{className:"language-elisp",children:(0,a.jsxs)(s.code,{className:"language-elisp",children:["    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"use-package"})," lsp-eslint\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":demand"})," ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":after"})," lsp-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsxs)(s.p,{children:["Additionally, follow the steps from ",(0,a.jsx)(s.a,{href:"https://emacs-lsp.github.io/lsp-mode/tutorials/reactjs-tutorial/#linting",children:"LSP-Mode's React Javascript\ntutorial for adding linting"})," in order to download the server."]}),"\n",(0,a.jsx)("a",{id:"org843e1fd"}),"\n",(0,a.jsx)(s.h3,{children:"(Optional) Tailwind LSP Server"}),"\n",(0,a.jsxs)(s.p,{children:["We'll use ",(0,a.jsx)(s.a,{href:"https://github.com/merrickluo/lsp-tailwindcss",children:"lsp-tailwindcss"})," however it's not on Melpa so I'll use\n",(0,a.jsx)(s.a,{href:"https://github.com/radian-software/straight.el",children:"straight"})," to download it. You can also download the lsp-tailwindcss.el\nfile and load it in your ",(0,a.jsx)(s.code,{children:"init.el"}),". Here's my config"]}),"\n",(0,a.jsx)(s.pre,{className:"language-elisp",children:(0,a.jsxs)(s.code,{className:"language-elisp",children:["    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"use-package"})," lsp-tailwindcss\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":straight"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"'("}),(0,a.jsx)(s.span,{className:"token car",children:"lsp-tailwindcss"})," ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":type"})," git ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":host"})," github ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":repo"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"merrickluo/lsp-tailwindcss"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":init"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"setq"})," lsp-tailwindcss-add-on-mode ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":config"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"dolist"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"tw-major-mode"}),"\n               ",(0,a.jsx)(s.span,{className:"token punctuation",children:"'("}),(0,a.jsx)(s.span,{className:"token car",children:"css-mode"}),"\n                 css-ts-mode\n                 typescript-mode\n                 typescript-ts-mode\n                 tsx-ts-mode\n                 js2-mode\n                 js-ts-mode\n                 clojure-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"add-to-list"})," ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'lsp-tailwindcss-major-modes"})," tw-major-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsxs)(s.p,{children:["Install the server:\n",(0,a.jsx)(s.code,{children:"M-x lsp-install-server"}),", then select ",(0,a.jsx)(s.code,{children:"tailwindcss"}),"."]}),"\n",(0,a.jsx)("a",{id:"org620d7ea"}),"\n",(0,a.jsx)(s.h2,{children:"LSP Performance"}),"\n",(0,a.jsxs)(s.p,{children:["Everything is working correctly now, and you should have already good\nsupport for web development ",(0,a.jsx)(s.em,{children:"BUT"})," performance can be better."]}),"\n",(0,a.jsxs)(s.p,{children:["Run ",(0,a.jsx)(s.code,{children:"M-x lsp-doctor"}),". If you see"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"    Checking for Native JSON support: OK\n    Check emacs supports `read-process-output-max': OK\n    Check `read-process-output-max' default has been changed from 4k: OK\n    Byte compiled against Native JSON (recompile lsp-mode if failing when Native JSON available): OK\n    `gc-cons-threshold' increased?: OK\n    Using `plist' for deserialized objects? (refer to https://emacs-lsp.github.io/lsp-mode/page/performance/#use-plists-for-deserialization): OK\n    Using emacs 28+ with native compilation?: OK\n\n"})}),"\n",(0,a.jsxs)(s.p,{children:["You are in a very good place. If not, please have a look at ",(0,a.jsx)(s.a,{href:"https://emacs-lsp.github.io/lsp-mode/page/performance/",children:"The\nofficial lsp-mode performance guide"})]}),"\n",(0,a.jsx)(s.p,{children:"Here's my setting for performance"}),"\n",(0,a.jsx)(s.pre,{className:"language-elisp",children:(0,a.jsxs)(s.code,{className:"language-elisp",children:["    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"setenv"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"LSP_USE_PLISTS"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"true"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token comment",children:";; in early-init.el"}),"\n\n    ",(0,a.jsx)(s.span,{className:"token comment",children:";; init.el"}),"\n    ",(0,a.jsx)(s.span,{className:"token heading comment title",children:";;;; per https://github.com/emacs-lsp/lsp-mode#performance"}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"setq"})," read-process-output-max ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"*"})," ",(0,a.jsx)(s.span,{className:"token number",children:"10"})," ",(0,a.jsx)(s.span,{className:"token number",children:"1024"})," ",(0,a.jsx)(s.span,{className:"token number",children:"1024"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token comment",children:";; 10mb"}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"setq"})," gc-cons-threshold ",(0,a.jsx)(s.span,{className:"token number",children:"200000000"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsx)("a",{id:"orgc88562e"}),"\n",(0,a.jsx)(s.h3,{children:"Emacs LSP Booster"}),"\n",(0,a.jsx)(s.p,{children:"My experience has been that even with all of these improvements,\nyou'll still get consistent freezes in your UI given the single\nthreaded sync nature of Emacs."}),"\n",(0,a.jsxs)(s.p,{children:["I'll admit I was close to starting exploring Nvim until I found ",(0,a.jsx)(s.a,{href:"https://github.com/blahgeek/emacs-lsp-booster?tab=readme-ov-file",children:"Emacs\nLSP Booster"}),"."]}),"\n",(0,a.jsx)(s.p,{children:"The most expensive operation for an LSP provider is parsing JSON since\nthat is the agreed-upon protocol. While newer versions of Emacs ship\nwith native JSON support, it's still not performant enough especially for servers like Tailwind which I found give emacs a lot of JSON to parse."}),"\n",(0,a.jsxs)(s.p,{children:["LSP Booster is an external executable that wraps LSP server providers\nand asynchronously converts JSON to ",(0,a.jsx)(s.a,{href:"https://www.gnu.org/software/emacs/manual/html_node/elisp/Property-Lists.html",children:"plists"})," so lsp-mode can use them\ndirectly."]}),"\n",(0,a.jsxs)(s.p,{children:["To install, follow the instructions from the github repository. After\nthat add these lines in your ",(0,a.jsx)(s.code,{children:"lsp-mode"})," config:"]}),"\n",(0,a.jsx)(s.pre,{className:"language-elisp",children:(0,a.jsxs)(s.code,{className:"language-elisp",children:["    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"use-package"})," lsp-mode\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; ... previous configuration"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":preface"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token defun",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"defun"})," ",(0,a.jsx)(s.span,{className:"token function",children:"lsp-booster--advice-json-parse"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token arguments",children:[(0,a.jsx)(s.span,{className:"token argument variable",children:"old-fn"})," ",(0,a.jsxs)(s.span,{className:"token rest-vars",children:[(0,a.jsx)(s.span,{className:"token lisp-marker",children:"&rest"})," ",(0,a.jsx)(s.span,{className:"token argument variable",children:"args"})]})]}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})]}),"\n        ",(0,a.jsx)(s.span,{className:"token string",children:'"Try to parse bytecode instead of json."'}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"or"}),"\n         ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"when"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"equal"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"following-char"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ?#",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n\n           ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"bytecode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"read"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"current-buffer"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n             ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"when"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"byte-code-function-p"})," bytecode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n               ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"funcall"})," bytecode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n         ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"apply"})," old-fn args",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token defun",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"defun"})," ",(0,a.jsx)(s.span,{className:"token function",children:"lsp-booster--advice-final-command"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsxs)(s.span,{className:"token arguments",children:[(0,a.jsx)(s.span,{className:"token argument variable",children:"old-fn"})," ",(0,a.jsx)(s.span,{className:"token argument variable",children:"cmd"})," ",(0,a.jsxs)(s.span,{className:"token other-marker-vars",children:[(0,a.jsx)(s.span,{className:"token lisp-marker",children:"&optional"})," ",(0,a.jsx)(s.span,{className:"token argument variable",children:"test"}),"?"]})]}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})]}),"\n        ",(0,a.jsxs)(s.span,{className:"token string",children:['"Prepend emacs-lsp-booster command to lsp ',(0,a.jsx)(s.span,{className:"token argument",children:"CMD"}),'."']}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"let"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"orig-result"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"funcall"})," old-fn cmd test?",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n          ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"and"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"not"})," test?",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"                             ",(0,a.jsx)(s.span,{className:"token comment",children:";; for check lsp-server-present?"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"not"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"file-remote-p"})," default-directory",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token comment",children:";; see lsp-resolve-final-command, it would add extra shell wrapper"}),"\n                   lsp-use-plists\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"not"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"functionp"})," ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'json-rpc-connection"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"  ",(0,a.jsx)(s.span,{className:"token comment",children:";; native json-rpc"}),"\n                   ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"executable-find"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"emacs-lsp-booster"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n              ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"progn"}),"\n                ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"message"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"Using emacs-lsp-booster for %s!"'})," orig-result",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"cons"})," ",(0,a.jsx)(s.span,{className:"token string",children:'"emacs-lsp-booster"'})," orig-result",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n            orig-result",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":init"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"setq"})," lsp-use-plists ",(0,a.jsx)(s.span,{className:"token boolean",children:"t"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token comment",children:";; Initiate https://github.com/blahgeek/emacs-lsp-booster for performance"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"advice-add"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"if"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"progn"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"require"})," ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'json"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                             ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"fboundp"})," ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'json-parse-buffer"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                      ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'json-parse-buffer"}),"\n                    ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'json-read"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n                  ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":around"}),"\n                  ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"#'lsp-booster--advice-json-parse"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n      ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"advice-add"})," ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'lsp-resolve-final-command"})," ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":around"})," ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"#'lsp-booster--advice-final-command"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsx)(s.p,{children:"Now your LSP completions will be blazingly fast \uD83D\uDD25 and there will be no UI freezes!"}),"\n",(0,a.jsx)("a",{id:"orgd4dc6d9"}),"\n",(0,a.jsx)(s.h2,{children:"Structural editing"}),"\n",(0,a.jsxs)(s.p,{children:["I use ",(0,a.jsx)(s.a,{href:"https://github.com/mickeynp/combobulate",children:"Combobulate"})," for structural editing. It adds support for structural navigation and edition like you would get in lisp-like languages."]}),"\n",(0,a.jsx)(s.p,{children:"Here's the config, from the repo itself:"}),"\n",(0,a.jsx)(s.pre,{className:"language-elisp",children:(0,a.jsxs)(s.code,{className:"language-elisp",children:[(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"use-package"})," treesit\n  ",(0,a.jsx)(s.span,{className:"token comment",children:";; ... all the config from above"}),"\n  ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":config"}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"os/setup-install-grammars"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:";; Do not forget to customize Combobulate to your liking:"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:";;"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:";;  M-x customize-group RET combobulate RET"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:";;"}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"use-package"})," combobulate\n    ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":preface"}),"\n    ",(0,a.jsx)(s.span,{className:"token comment",children:";; You can customize Combobulate's key prefix here."}),"\n    ",(0,a.jsx)(s.span,{className:"token comment",children:";; Note that you may have to restart Emacs for this to take effect!"}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"setq"})," combobulate-key-prefix ",(0,a.jsx)(s.span,{className:"token string",children:'"C-c o"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n\n    ",(0,a.jsx)(s.span,{className:"token comment",children:";; Optional, but recommended."}),"\n    ",(0,a.jsx)(s.span,{className:"token comment",children:";;"}),"\n    ",(0,a.jsx)(s.span,{className:"token comment",children:";; You can manually enable Combobulate with `M-x"}),"\n    ",(0,a.jsx)(s.span,{className:"token comment",children:";; combobulate-mode'."}),"\n    ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":hook"}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"python-ts-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," combobulate-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n     ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"js-ts-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," combobulate-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n     ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"go-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," go-ts-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n     ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"html-ts-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," combobulate-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n     ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"css-ts-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," combobulate-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n     ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"yaml-ts-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," combobulate-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n     ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"typescript-ts-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," combobulate-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n     ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"json-ts-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," combobulate-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n     ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"tsx-ts-mode"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"."})," combobulate-mode",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n    ",(0,a.jsx)(s.span,{className:"token comment",children:";; Amend this to the directory where you keep Combobulate's source"}),"\n    ",(0,a.jsx)(s.span,{className:"token comment",children:";; code."}),"\n    ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":load-path"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"~/workspace/combobulate"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsx)(s.p,{children:"Here's the result:"}),"\n",(0,a.jsx)("img",{src:"/static/gifs/combobulate-demo.gif"}),"\n",(0,a.jsx)("a",{id:"orgcc099c1"}),"\n",(0,a.jsx)(s.h2,{children:"Formatting buffers with prettier"}),"\n",(0,a.jsxs)(s.p,{children:["I use ",(0,a.jsx)(s.a,{href:"https://github.com/radian-software/apheleia",children:"apheleia"})," for formatting buffers on save. It works great and almost out of the box."]}),"\n",(0,a.jsx)(s.pre,{className:"language-elisp",children:(0,a.jsxs)(s.code,{className:"language-elisp",children:[(0,a.jsx)(s.span,{className:"token heading comment title",children:";;; APHELEIA"}),"\n",(0,a.jsx)(s.span,{className:"token comment",children:";; auto-format different source code files extremely intelligently"}),"\n",(0,a.jsx)(s.span,{className:"token comment",children:";; https://github.com/radian-software/apheleia"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"use-package"})," apheleia\n  ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":ensure"})," apheleia\n  ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":diminish"})," ",(0,a.jsx)(s.span,{className:"token string",children:'""'}),"\n  ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":defines"}),"\n  apheleia-formatters\n  apheleia-mode-alist\n  ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":functions"}),"\n  apheleia-global-mode\n  ",(0,a.jsx)(s.span,{className:"token lisp-property property",children:":config"}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"setf"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"alist-get"})," ",(0,a.jsx)(s.span,{className:"token quoted-symbol variable symbol",children:"'prettier-json"})," apheleia-formatters",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"'("}),(0,a.jsx)(s.span,{className:"token string",children:'"prettier"'})," ",(0,a.jsx)(s.span,{className:"token string",children:'"--stdin-filepath"'})," filepath",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n  ",(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token car",children:"apheleia-global-mode"})," ",(0,a.jsx)(s.span,{className:"token number",children:"+1"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n\n"]})}),"\n",(0,a.jsxs)(s.p,{children:["And now, apheleia will take your ",(0,a.jsx)(s.code,{children:".prettierrc"})," from the repository root and use that to format your files whenever you save."]}),"\n",(0,a.jsx)("a",{id:"other-resources"}),"\n",(0,a.jsx)(s.h2,{children:"Other resources"}),"\n",(0,a.jsx)(s.p,{children:"Here are some other resources that I explored which might be handy:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.a,{href:"https://github.com/orzechowskid/tsx-mode.el",children:"tsx-mode.el"})," - Special TSX mode that handles auto-closing tags, css-in-js, line code coverage and code folding"]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.a,{href:"https://github.com/ananthakumaran/tide",children:"tide"})," - Typescript interactive development. Works well out of the box and is the default choice in Doom Emacs. I found it is limited in a monorepo setup."]}),"\n"]}),"\n",(0,a.jsx)("a",{id:"conclusion"}),"\n",(0,a.jsx)(s.h2,{children:"Conclusion"}),"\n",(0,a.jsx)(s.p,{children:"I am very happy with the current setup I landed on and it took me a while to make it resemble the experience from VSCode & Webstorm."}),"\n",(0,a.jsx)(s.p,{children:"I worked with this configuration within a big monorepo at my previous job and it performs as you expected."}),"\n",(0,a.jsx)(s.p,{children:"Hope this is useful for you! If you think others might benefit, give it a share!"})]})}s.default=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.jsx)(o,Object.assign({},n,{children:(0,a.jsx)(i,n)}))}},9008:function(n,s,e){n.exports=e(3121)},1151:function(n,s,e){"use strict";e.d(s,{ah:function(){return c}});var a=e(7294);let t=a.createContext({});function c(n){let s=a.useContext(t);return a.useMemo(()=>"function"==typeof n?n(s):{...s,...n},[s,n])}}},function(n){n.O(0,[774,888,179],function(){return n(n.s=8942)}),_N_E=n.O()}]);